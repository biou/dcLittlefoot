!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).littlefoot={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e){var t={exports:{}};return e(t,t.exports),t.exports}var r=n((function(e){var n,r,o,i,a,c,u,l,s,f,d,p,v,h,y,m,g,b,w,_,S,x,O;!function(E){var j="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:{};function P(e,t){return e!==j&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}!function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])};n=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},i=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},a=function(e,t){return function(n,r){t(n,r,e)}},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){e.done?n(e.value):o(e.value).then(a,c)}u((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return u([e,t])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},s=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||O(t,e,n)},O=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},d=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},v=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r},h=function(e){return this instanceof h?(this.v=e,this):new h(e)},y=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||c(e,t)}))})}function c(e,t){try{u(o[e](t))}catch(e){f(i[0][3],e)}}function u(e){e.value instanceof h?Promise.resolve(e.value.v).then(l,s):f(i[0][2],e)}function l(e){c("next",e)}function s(e){c("throw",e)}function f(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}},m=function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:h(e[r](t)),done:"return"===r}:o?o(t):t}:o}},g=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){o(r,i,(t=e[n](t)).done,t.value)}))}}function o(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}},b=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&O(t,e,n);return E(t,e),t},_=function(e){return e&&e.__esModule?e:{default:e}},S=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},x=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},e("__extends",n),e("__assign",r),e("__rest",o),e("__decorate",i),e("__param",a),e("__metadata",c),e("__awaiter",u),e("__generator",l),e("__exportStar",s),e("__createBinding",O),e("__values",f),e("__read",d),e("__spread",p),e("__spreadArrays",v),e("__await",h),e("__asyncGenerator",y),e("__asyncDelegator",m),e("__asyncValues",g),e("__makeTemplateObject",b),e("__importStar",w),e("__importDefault",_),e("__classPrivateFieldGet",S),e("__classPrivateFieldSet",x)}(P(j,P(e.exports)))}()})),o=(n((function(e,n){var r;r=t,e.exports=function(e){if(e.CSS&&e.CSS.escape)return e.CSS.escape;var t=function(e){if(0==arguments.length)throw new TypeError("`CSS.escape` requires an argument.");for(var t,n=String(e),r=n.length,o=-1,i="",a=n.charCodeAt(0);++o<r;)0!=(t=n.charCodeAt(o))?i+=t>=1&&t<=31||127==t||0==o&&t>=48&&t<=57||1==o&&t>=48&&t<=57&&45==a?"\\"+t.toString(16)+" ":0==o&&1==r&&45==t||!(t>=128||45==t||95==t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122)?"\\"+n.charAt(o):n.charAt(o):i+="ï¿½";return i};return e.CSS||(e.CSS={}),e.CSS.escape=t,t}(r)})),n((function(e,t){t.__esModule=!0,t.getStyle=void 0,t.getStyle=function(e,t){var n,r=((null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||window).getComputedStyle(e);return r.getPropertyValue(t)||r[t]}}))),i=n((function(e,t){t.__esModule=!0,t.pixels=void 0;var n=96,r=25.4;function i(e){return e?o.getStyle(e,"fontSize")||i(e.parentElement):o.getStyle(window.document.documentElement,"fontSize")}t.pixels=function e(t,o){var a,c,u=null!==(c=null===(a=null==o?void 0:o.ownerDocument)||void 0===a?void 0:a.defaultView)&&void 0!==c?c:window,l=u.document.documentElement||u.document.body,s=function(e){var t,n=e||"0",r=parseFloat(n),o=n.match(/[\d-.]+(\w+)$/);return[r,(null!==(t=null==o?void 0:o[1])&&void 0!==t?t:"").toLowerCase()]}(t),f=s[0];switch(s[1]){case"rem":return f*e(i(window.document.documentElement));case"em":return f*e(i(o),null==o?void 0:o.parentElement);case"in":return f*n;case"q":return f*n/r/4;case"mm":return f*n/r;case"cm":return f*n*10/r;case"pt":return f*n/72;case"pc":return f*n/6;case"vh":return(f*u.innerHeight||l.clientWidth)/100;case"vw":return(f*u.innerWidth||l.clientHeight)/100;case"vmin":return f*Math.min(u.innerWidth||l.clientWidth,u.innerHeight||l.clientHeight)/100;case"vmax":return f*Math.max(u.innerWidth||l.clientWidth,u.innerHeight||l.clientHeight)/100;default:return f}}}));function a(e,t){e.classList.add(t)}function c(e,t){e.classList.remove(t)}function u(e){var t;null===(t=e.parentNode)||void 0===t||t.removeChild(e)}var l="littlefoot__tooltip";function s(e){var t=e.offsetHeight,n=e.getBoundingClientRect().top+t/2;return{above:n,below:window.innerHeight-n}}function f(e){var t=parseFloat(o.getStyle(e,"marginLeft")),n=e.offsetWidth-t;return(e.getBoundingClientRect().left+n/2)/window.innerWidth}function d(e,t){var n=2*parseInt(o.getStyle(e,"marginTop"),10)+e.offsetHeight;return t.below<n&&t.below<t.above?"above":"below"}var p="is-active",v="is-changing",h="is-scrollable",y=function(e){return!!e.parentElement};function m(e){var t=e.id,n=e.button,r=e.content,m=e.host,g=e.popover,b=e.wrapper,w=!1,_=0,S="above";return{id:t,activate:function(e){var t;n.setAttribute("aria-expanded","true"),a(n,v),a(n,p),n.insertAdjacentElement("afterend",g),g.style.maxWidth=document.body.clientWidth+"px",t=r,_=Math.round(i.pixels(o.getStyle(t,"maxHeight"),t)),null==e||e(g,n)},dismiss:function(e){n.setAttribute("aria-expanded","false"),a(n,v),c(n,p),c(g,p),null==e||e(g,n)},isActive:function(){return n.classList.contains(p)},isReady:function(){return!n.classList.contains(v)},isHovered:function(){return w},ready:function(){a(g,p),c(n,v)},remove:function(){u(g),c(n,v)},reposition:function(){y(g)&&(r.style.maxHeight=function(e,t,n){var r=s(t),i=d(e,r),a=parseInt(o.getStyle(e,"marginTop"),10);return Math.min(n,r[i]-a-15)}(g,n,_)+"px",S=function(e,t,n){var r=d(e,s(t));if(n!==r){c(e,"is-"+n),a(e,"is-"+r);var o=100*f(t)+"%",i="above"===r?"100%":"0";e.style.transformOrigin=o+" "+i}return r}(g,n,S),g.offsetHeight<r.scrollHeight?(a(g,h),r.setAttribute("tabindex","0")):(c(g,h),r.removeAttribute("tabindex")))},resize:function(){y(g)&&(g.style.left=function(e,t){var n=e.offsetWidth;return-f(t)*n+parseInt(o.getStyle(t,"marginLeft"),10)+t.offsetWidth/2}(r,n)+"px",b.style.maxWidth=r.offsetWidth+"px",function(e,t){var n=e.querySelector("."+l);n&&(n.style.left=100*f(t)+"%")}(g,n))},startHovering:function(){w=!0},stopHovering:function(){w=!1},destroy:function(){return u(m)}}}var g=n((function(e,t){t.__esModule=!0,t.throttle=void 0,t.throttle=function(e,t){void 0===t&&(t=0);var n,r=0;return Object.assign((function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=Math.max(0,r+t-Date.now());a?(clearTimeout(n),n=setTimeout((function(){r=Date.now(),e.apply(void 0,o)}),a)):(r=Date.now(),e.apply(void 0,o))}),{cancel:function(){r=0,clearTimeout(n)}})}})),b="is-fully-scrolled";function w(e,t){e.addEventListener("wheel",g.throttle(function(e){return function(t){var n=t.currentTarget,r=-t.deltaY;r>0&&c(e,b),n&&r<=0&&r<n.clientHeight+n.scrollTop-n.scrollHeight&&a(e,b)}}(t),16))}var _="littlefoot__content",S="littlefoot__wrapper",x="littlefoot--print",O=function(e){return a(e,x)};function E(e,t){return Array.from(e.querySelectorAll(t))}function j(e,t){return e.querySelector("."+t)||e.firstElementChild||e}function P(e){var t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function A(e){return void 0!==e}function T(e){var t=e.parentElement,n=function(e,t){return Array.from(e.children).filter((function(e){return 8!==e.nodeType&&e.matches(t)}))}(t,":not(.littlefoot--print)"),r=n.filter((function(e){return"HR"===e.tagName}));n.length===r.length&&(r.concat(t).forEach(O),T(t))}function M(e){var t=e.parentElement;u(e),t.innerHTML.replace("[]","").replace("&nbsp;"," ").trim()||M(t)}function H(e,t){var n=P(e.body.outerHTML);E(n,'[href$="#'+e.referenceId+'"]').forEach(M);var r=n.innerHTML.trim();return{original:e,data:{id:String(t+1),number:t+1,reference:"lf-"+e.referenceId,content:r.startsWith("<")?r:"<p>"+r+"</p>"}}}function D(e){var t=/<%=?\s*(\w+?)\s*%>/g;return function(n){return e.replace(t,(function(e,t){var r;return String(null!==(r=n[t])&&void 0!==r?r:"")}))}}function k(e){var t,n,o,i=e.allowDuplicates,a=e.anchorParentSelector,u=e.anchorPattern,l=e.buttonTemplate,s=e.contentTemplate,f=e.footnoteSelector,d=e.numberResetSelector,p=e.scope,v=function(e,t,n){return E(e,n+' a[href*="#"]').filter((function(e){return(e.href+e.rel).match(t)}))}(document,u,p).map(function(e,t,n,r){var o=[];return function(i){var a=i.href.split("#")[1],c=E(e,"#"+CSS.escape(a)).find((function(e){return t||!o.includes(e)})),u=null==c?void 0:c.closest(r);if(u){o.push(u);var l=i.closest(n)||i;return{reference:l,referenceId:l.id||i.id,body:u}}}}(document,i,a,f)).filter(A).map(H).map(d?(t=d,n=0,o=null,function(e){var i=e.original,a=e.data,c=i.reference.closest(t);return n=o===c?n+1:1,o=c,{original:i,data:r.__assign(r.__assign({},a),{number:n})}}):function(e){return e}).map(function(e,t){var n=D(e),r=D(t);return function(e){var t=e.original,o=e.data,i=o.id,a=P('<span class="littlefoot">'+n(o)+"</span>"),c=a.firstElementChild;c.setAttribute("aria-expanded","false"),c.dataset.footnoteButton="",c.dataset.footnoteId=i;var u=P(r(o));u.dataset.footnotePopover="",u.dataset.footnoteId=i;var l=j(u,S),s=j(u,_);return w(s,u),{original:t,data:o,id:i,button:c,host:a,popover:u,content:s,wrapper:l}}}(l,s));v.forEach((function(e){var t=e.original,n=e.host;O(t.reference),O(t.body),T(t.body),function(e,t){e.insertAdjacentElement("beforebegin",t)}(t.reference,n)}));var h=v.map(m);return{footnotes:h,unmount:function(){h.forEach((function(e){return e.destroy()})),E(document,".littlefoot--print").forEach((function(e){return c(e,x)}))}}}var I={activateDelay:100,activateOnHover:!1,allowDuplicates:!0,allowMultiple:!1,anchorParentSelector:"sup",anchorPattern:/(fn|footnote|note)[:\-_\d]/gi,dismissDelay:100,dismissOnUnhover:!1,footnoteSelector:"li",hoverDelay:250,numberResetSelector:"",scope:"",contentTemplate:'<aside class="littlefoot__popover" id="fncontent:<% id %>"><div class="'+S+'"><div class="'+_+'"><% content %></div></div><div class="'+l+'"></div></aside>',buttonTemplate:'<button class="littlefoot__button" id="<% reference %>" title="See Footnote <% number %>"><svg role="img" aria-labelledby="title-<% reference %>" viewbox="0 0 31 6" preserveAspectRatio="xMidYMid"><title id="title-<% reference %>">Footnote <% number %></title><circle r="3" cx="3" cy="3" fill="white"></circle><circle r="3" cx="15" cy="3" fill="white"></circle><circle r="3" cx="27" cy="3" fill="white"></circle></svg></button>'};var C=n((function(e,t){e.exports=function(){function e(){if(!(this instanceof e))return new e;this.size=0,this.uid=0,this.selectors=[],this.selectorObjects={},this.indexes=Object.create(this.indexes),this.activeIndexes=[]}var t=window.document.documentElement,n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.msMatchesSelector;e.prototype.matchesSelector=function(e,t){return n.call(e,t)},e.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)},e.prototype.indexes=[];var r=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;e.prototype.indexes.push({name:"ID",selector:function(e){var t;if(t=e.match(r))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});var o=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;e.prototype.indexes.push({name:"CLASS",selector:function(e){var t;if(t=e.match(o))return t[0].slice(1)},element:function(e){var t=e.className;if(t){if("string"==typeof t)return t.split(/\s/);if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var i,a=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;e.prototype.indexes.push({name:"TAG",selector:function(e){var t;if(t=e.match(a))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),e.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},i="function"==typeof window.Map?window.Map:function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e+" "]},e.prototype.set=function(e,t){this.map[e+" "]=t},e}();var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function u(e,t){var n,r,o,i,a,u,l=(e=e.slice(0).concat(e.default)).length,s=t,f=[];do{if(c.exec(""),(o=c.exec(s))&&(s=o[3],o[2]||!s))for(n=0;n<l;n++)if(a=(u=e[n]).selector(o[1])){for(r=f.length,i=!1;r--;)if(f[r].index===u&&f[r].key===a){i=!0;break}i||f.push({index:u,key:a});break}}while(o);return f}function l(e,t){var n,r,o;for(n=0,r=e.length;n<r;n++)if(o=e[n],t.isPrototypeOf(o))return o}function s(e,t){return e.id-t.id}return e.prototype.logDefaultIndexUsed=function(){},e.prototype.add=function(e,t){var n,r,o,a,c,s,f,d,p=this.activeIndexes,v=this.selectors,h=this.selectorObjects;if("string"==typeof e){for(h[(n={id:this.uid++,selector:e,data:t}).id]=n,f=u(this.indexes,e),r=0;r<f.length;r++)a=(d=f[r]).key,(c=l(p,o=d.index))||((c=Object.create(o)).map=new i,p.push(c)),o===this.indexes.default&&this.logDefaultIndexUsed(n),(s=c.map.get(a))||(s=[],c.map.set(a,s)),s.push(n);this.size++,v.push(e)}},e.prototype.remove=function(e,t){if("string"==typeof e){var n,r,o,i,a,c,l,s,f=this.activeIndexes,d=this.selectors=[],p=this.selectorObjects,v={},h=1===arguments.length;for(n=u(this.indexes,e),o=0;o<n.length;o++)for(r=n[o],i=f.length;i--;)if(c=f[i],r.index.isPrototypeOf(c)){if(l=c.map.get(r.key))for(a=l.length;a--;)(s=l[a]).selector!==e||!h&&s.data!==t||(l.splice(a,1),v[s.id]=!0);break}for(o in v)delete p[o],this.size--;for(o in p)d.push(p[o].selector)}},e.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,n,r,o,i,a,c,u,l={},f=[],d=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,r=d.length;t<r;t++)for(i=d[t],n=0,o=(a=this.matches(i)).length;n<o;n++)l[(u=a[n]).id]?c=l[u.id]:(c={id:u.id,selector:u.selector,data:u.data,elements:[]},l[u.id]=c,f.push(c)),c.elements.push(i);return f.sort(s)},e.prototype.matches=function(e){if(!e)return[];var t,n,r,o,i,a,c,u,l,f,d,p=this.activeIndexes,v={},h=[];for(t=0,o=p.length;t<o;t++)if(u=(c=p[t]).element(e))for(n=0,i=u.length;n<i;n++)if(l=c.map.get(u[n]))for(r=0,a=l.length;r<a;r++)!v[d=(f=l[r]).id]&&this.matchesSelector(e,f.selector)&&(v[d]=!0,h.push(f));return h.sort(s)},e}()})),L=n((function(e,t){!function(e,t){t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var n={},r={},o=new WeakMap,i=new WeakMap,a=new WeakMap,c=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function u(e,t,n){var r=e[t];return e[t]=function(){return n.apply(e,arguments),r.apply(e,arguments)},e}function l(e,t,n){var r=[],o=t;do{if(1!==o.nodeType)break;var i=e.matches(o);if(i.length){var a={node:o,observers:i};n?r.unshift(a):r.push(a)}}while(o=o.parentElement);return r}function s(){o.set(this,!0)}function f(){o.set(this,!0),i.set(this,!0)}function d(){return a.get(this)||null}function p(e,t){c&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:t||c.get})}function v(e){try{return e.eventPhase,!0}catch(e){return!1}}function h(e){if(v(e)){var t=(1===e.eventPhase?r:n)[e.type];if(t){var c=l(t,e.target,1===e.eventPhase);if(c.length){u(e,"stopPropagation",s),u(e,"stopImmediatePropagation",f),p(e,d);for(var h=0,y=c.length;h<y&&!o.get(e);h++){var m=c[h];a.set(e,m.node);for(var g=0,b=m.observers.length;g<b&&!i.get(e);g++)m.observers[g].data.call(m.node,e)}a.delete(e),p(e)}}}}function y(e,o,i){var a=!!(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).capture,c=a?r:n,u=c[e];u||(u=new t,c[e]=u,document.addEventListener(e,h,a)),u.add(o,i)}function m(e,t,o){var i=!!(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).capture,a=i?r:n,c=a[e];c&&(c.remove(t,o),c.size||(delete a[e],document.removeEventListener(e,h,i)))}function g(e,t,n){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}))}e.fire=g,e.off=m,e.on=y,Object.defineProperty(e,"__esModule",{value:!0})}(t,C)})),F="[data-footnote-id]",W=function(e,t){return e.target.closest(t)},R=function(e){return null==e?void 0:e.dataset.footnoteId},z=function(e){return function(t){t.preventDefault();var n=W(t,F),r=R(n);r&&e(r)}},q=document.addEventListener,U=document.removeEventListener,V=window.addEventListener,N=window.removeEventListener;function B(e){var t,n,r,o=(t=e.toggle,n=e.dismissAll,function(e){var r=W(e,"[data-footnote-button]"),o=R(r);o?t(o):W(e,"[data-footnote-popover]")||n()}),i=(r=e.dismissAll,function(e){27!==e.keyCode&&"Escape"!==e.key&&"Esc"!==e.key||r()}),a=g.throttle(e.repositionAll,16),c=g.throttle(e.resizeAll,16),u=z(e.hover),l=z(e.unhover);return q("touchend",o),q("click",o),q("keyup",i),q("gestureend",a),V("scroll",a),V("resize",c),L.on("mouseover",F,u),L.on("mouseout",F,l),function(){U("touchend",o),U("click",o),U("keyup",i),U("gestureend",a),N("scroll",a),N("resize",c),L.off("mouseover",F,u),L.off("mouseout",F,l)}}function G(e){void 0===e&&(e={});var t=r.__assign(r.__assign({},I),e),n=function(e,t){var n=e.footnotes,r=e.unmount,o=function(e){return function(n){n.isReady()&&(n.dismiss(t.dismissCallback),setTimeout(n.remove,e))}},i=function(e){return function(r){t.allowMultiple||n.filter((function(e){return e.id!==r.id})).forEach(o(t.dismissDelay)),r.isReady()&&(r.activate(t.activateCallback),r.reposition(),r.resize(),setTimeout(r.ready,e))}},a=function(e){return function(t){var r=n.find((function(e){return e.id===t}));r&&e(r)}};return{activate:function(e,t){return a(i(t))(e)},dismiss:function(e,t){return a(o(t))(e)},dismissAll:function(){return n.forEach(o(t.dismissDelay))},repositionAll:function(){return n.forEach((function(e){return e.reposition()}))},resizeAll:function(){return n.forEach((function(e){return e.resize()}))},toggle:a((function(e){return e.isActive()?o(t.dismissDelay)(e):i(t.activateDelay)(e)})),hover:a((function(e){e.startHovering(),t.activateOnHover&&!e.isActive()&&i(t.hoverDelay)(e)})),unhover:a((function(e){e.stopHovering(),t.dismissOnUnhover&&setTimeout((function(){return n.filter((function(e){return!e.isHovered()})).forEach(o(t.dismissDelay))}),t.hoverDelay)})),unmount:r}}(k(t),t),o=B(n);return{activate:function(e,r){void 0===r&&(r=t.activateDelay),n.activate(e,r)},dismiss:function(e,r){void 0===r&&(r=t.dismissDelay),void 0===e?n.dismissAll():n.dismiss(e,r)},unmount:function(){o(),n.unmount()},getSetting:function(e){return t[e]},updateSetting:function(e,n){t[e]=n}}}e.default=G,e.littlefoot=G,Object.defineProperty(e,"__esModule",{value:!0})}));
